{% extends 'base.html.twig' %}

{% block title %}Video{% endblock %}

{% block body %}
    
    
    <div class="row m-4">
        <div class="col-12 col-lg-8 col-xl-8 col-md-12 col-sm-12 h-25">
            <video width="100%" controls>
                <source src="{{asset('uploads/'~ video.idCanal.id ~ '/videos/' ~ video.id)}}">
                
              Your browser does not support the video tag.
              </video>
              <div class="row">
                <div class="col-12 mx-4 m-sm-0">
                    <h1>{{ video.titulo }}</h1>
                    <h2>{{ video.duracion }}</h2>
                    <div class="row">
                        <div class="col-12 col-sm-7">
                            <span>{% trans %}Fecha de publicación{% endtrans %}:
                                {% if app.request.locale == 'es' %}
                                    {{ video.fechaPublicacion | date('d/m/Y')  }}
                                    {% else %}
                                        {{ video.fechaPublicacion | date('m/d/Y')  }}</span>
                                {% endif %} 
                                
                        </div>
                        <div class="col-12 my-2 m-sm-0 col-sm-5" id="divMgDislike">
                            {% include "video/mgAndDislike.html.twig" with{'video': video} %}
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-3">
                            <a href="{{ path('canal_show', { 'id': video.idCanal.id }) }}" class="text-white">
                                <h2 class="nombreCanal">{{ video.idCanal.nombreCanal }}</h2>
                            </a>
                        </div>
                        
                        <div class="container-fluid" id="toggleSuscripcion">
                            {% include "suscripcion/toggleSuscripcion.html.twig" with {'video' : video} %}
                        </div> 
                    </div>
                    
                   
                    <span id="numSuscriptores">{{ video.idCanal.suscritosAMi | length }} {% trans %}suscriptor(es){% endtrans %}</span>
                    <p>{{ video.descripcion }}</p>
            
                    {% if video.idCanal == app.user %}
                        {% set url = path('video_delete', {'id': video.id }) %}
                        {% set token = csrf_token('delete' ~ video.id) %}
                        <div class="mt-2">
                            {% set confirmationBorrar = '¿Estás seguro de borrar este vídeo?'|trans|raw %}
                            {#Are you sure you want to delete this item?#}
                            <form method="post" action="{{ path('video_delete', {'id': video.id}) }}" onsubmit="return confirm('{{ confirmationBorrar | trans }}');">
                                <input type="hidden" name="_method" value="DELETE">
                                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ video.id) }}">
                                <button class="btn btn-danger">{% trans %}Borrar vídeo{% endtrans %}</button>
                            </form>
                        </div>
                    {% endif %}
                    
                    
                </div>  
                <div id="divComentarios" class="col-12">
                    {% include "comentario/viewComments.html.twig" with {'nivel' : 'video'} %}
                </div>  
                
            </div>
              
        </div>

        <div class="col-4">
            {% include "video/index.html.twig" with {'videos': videosCategoria, 'extiende': false, 'recomendados': true} %}
        </div>
    </div>
    
    

    {#<a href="{{ path('video_index') }}">back to list</a>

    <a href="{{ path('video_edit', {'id': video.id}) }}">edit</a>

    {{ include('video/_delete_form.html.twig') }}#}
{% endblock %}
